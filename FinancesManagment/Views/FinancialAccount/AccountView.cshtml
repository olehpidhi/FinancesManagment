@model FinancesManagment.Models.FinancialAccountMember
@{
    ViewBag.Title = "Financial Account";
}

<h2>Financial account</h2>

<div class="form-horizontal well">
    <div class="form-group">
        @Html.LabelFor(model => model.FinancialAccount.Name, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DisplayFor(model => model.FinancialAccount.Name, new { htmlAttributes = new { @class = "form-control" } })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.FinancialAccount.Summary, htmlAttributes: new { @class = "control-label col-md-2" })
        <div id="Summary" class="col-md-10">
            @Html.DisplayFor(modelItem => Model.FinancialAccount.Summary, new { htmlAttributes = new { @class = "form-control"} })
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-6">
        <label for="Amount">Amount</label>
        <input id="Amount" class="form-control text-box single-line" type="number" />

        <label for="Category">Category</label>
        <input id="Category" class="form-control text-box single-line" type="text" />
        <br />
        <a onclick="makeTransaction()" class="btn btn-info">
            <span class="glyphicon glyphicon-transfer" aria-hidden="true"></span>
        </a>
    </div>
</div>

<br />

<div id="result" class="alert alert-info form-group" hidden>
    <a href="#" class="close" aria-label="close" onclick="$('#result').hide()">&times;</a>
</div>

<script type="text/javascript">
    function makeTransaction() {
        var data = {
            Id: @Model.Id,
            Amount: $("#Amount").val(),
            //Currency: $("#Currency"),
            Category: $("#Category").val()
        }
        console.log(data)


        $.post("@Url.Action("MakeTransaction")", data, function (data) {
            console.log(data)
            $("#result").text(data.status);
            $("#result").show();
            $("#Summary").text(data.summary);
        });
    }
</script>